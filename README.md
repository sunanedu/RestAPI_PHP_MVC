# Rest API PHP MVC

# ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á üöÄ REST API ‡∏î‡πâ‡∏ß‡∏¢ PHP ‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå (‡∏à‡∏≤‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÇ‡∏õ‡∏£)

‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á **REST API** ‡∏î‡πâ‡∏ß‡∏¢ PHP ‡∏ó‡∏µ‡πà‡∏ú‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡πÑ‡∏ü‡∏•‡πå ‡∏ó‡∏∏‡∏Å‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏î ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏∏‡∏Å Endpoint ‡∏Ñ‡∏£‡∏±‡∏ö 

‡πÉ‡∏ô‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ô‡∏µ‡πâ ‡∏ú‡∏°‡∏à‡∏∞‡∏û‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏õ‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á REST API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö E-commerce ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÅ‡∏ö‡∏ö **CRUD** (Create, Read, Update, Delete) ‡πÇ‡∏î‡∏¢‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á **PHP PDO** ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, ‡πÉ‡∏ä‡πâ **JWT (JSON Web Token)** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢, ‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÅ‡∏ö‡∏ö **MVC (Model-View-Controller)** ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö ‡πÅ‡∏•‡∏∞‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß

‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏•‡∏á‡∏•‡∏∂‡∏Å‡πÑ‡∏õ‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ **Rate Limiting** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏à‡∏°‡∏ï‡∏µ, ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ **Foreign Key** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á **Router** ‡∏ó‡∏µ‡πà‡∏ä‡∏≤‡∏ç‡∏â‡∏•‡∏≤‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Middleware ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô

‡∏ñ‡πâ‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß... ‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á API ‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö!

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö (The Blueprint)

‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡∏•‡∏á‡∏°‡∏∑‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î ‡πÄ‡∏£‡∏≤‡∏°‡∏≤‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö API ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ã‡∏∂‡πà‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

* **users**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (username, email, password, role)

* **categories**: ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

* **products**: ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

* **orders**: ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠

* **order\_items**: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠

* **addresses**: ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏™‡πà‡∏á

* **payments**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô

* **reviews**: ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

* **rate\_limits**: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° (Setup Your Workshop)

‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ API ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô Server ‡∏Å‡πà‡∏≠‡∏ô ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° **XAMPP** ‡∏Ñ‡∏£‡∏±‡∏ö

### 2.1 ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á XAMPP

* ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏´‡πâ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á **XAMPP** ‡∏à‡∏≤‡∏Å [‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£](https://www.apachefriends.org/ "null")

* ‡πÄ‡∏õ‡∏¥‡∏î **XAMPP Control Panel** ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î **Start** ‡∏ó‡∏µ‡πà‡πÇ‡∏°‡∏î‡∏π‡∏• **Apache** ‡πÅ‡∏•‡∏∞ **MySQL**

### 2.2 ‡∏™‡∏£‡πâ‡∏≤‡∏á Virtual Host (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ URL ‡∏™‡∏ß‡∏¢‡πÜ)

‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô `http://one.com` ‡πÅ‡∏ó‡∏ô `http://localhost/v.3_api1/public` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û

#### 1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `httpd-vhosts.conf`

* **‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏ü‡∏•‡πå**: `C:\xampp\apache\conf\extra\httpd-vhosts.conf`

* ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î:

```bash

#‡∏Ñ‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ localhost ‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô phpmyadmin
<VirtualHost *:80>
    DocumentRoot "C:/xampp/htdocs"
    ServerName localhost
</VirtualHost>

#‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà ‡πÇ‡∏î‡∏¢‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡πÅ‡∏•‡∏∞‡∏û‡∏≤‡∏ò ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Ñ ‡∏õ‡∏Å‡∏ï‡∏¥‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà /xampp/htdocs/
<VirtualHost *:80>
    DocumentRoot "C:/xampp/htdocs/v.3_api1/public"
    ServerName one.com
    <Directory "C:/xampp/htdocs/v.3_api1/public">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>
```

#### 2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `hosts` ‡∏Ç‡∏≠‡∏á Windows

* **‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏ü‡∏•‡πå**: `C:\Windows\System32\drivers\etc\hosts`

* **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**: ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (‡πÄ‡∏ä‡πà‡∏ô Notepad) ‡πÅ‡∏ö‡∏ö **Run as Administrator** ‡∏Å‡πà‡∏≠‡∏ô ‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ

* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î:

```bash
127.0.0.1   localhost
127.0.0.1   one.com
```

#### 3. ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó Apache

* ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà **XAMPP Control Panel** ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î **Stop** ‡πÅ‡∏•‡∏∞ **Start** ‡∏ó‡∏µ‡πà‡πÇ‡∏°‡∏î‡∏π‡∏• **Apache** ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏°‡∏µ‡∏ú‡∏•

### 2.3 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå

‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Ñ‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏á‡πà‡∏≤‡∏¢ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ Command Prompt (cmd) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

* ‡πÄ‡∏õ‡∏¥‡∏î **Command Prompt** ‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ô‡∏µ‡πâ:

```bash
cd C:\xampp\htdocs
mkdir v.3_api1
cd v.3_api1
mkdir public src src\Controllers src\Models src\Middlewares src\Core config
type nul > composer.json
type nul > database.sql
cd public
type nul > index.php
type nul > .htaccess
cd ..\config
type nul > config.php
cd ..\src
type nul > routes.php
cd Core
type nul > Database.php
type nul > Router.php
cd ..\Middlewares
type nul > AuthMiddleware.php
type nul > RateLimiter.php
cd ..\Controllers
type nul > AuthController.php
type nul > UserController.php
type nul > CategoryController.php
type nul > ProductController.php
type nul > OrderController.php
type nul > OrderItemController.php
type nul > AddressController.php
type nul > PaymentController.php
type nul > ReviewController.php
cd ..\Models
type nul > User.php
type nul > Category.php
type nul > Product.php
type nul > Order.php
type nul > OrderItem.php
type nul > Address.php
type nul > Payment.php
type nul > Review.php
```

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (The Foundation)

‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå SQL ‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• `api_db` ‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á `rate_limits` ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö

* ‡∏ô‡∏≥‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏£‡∏±‡∏ô‡πÉ‡∏ô **phpMyAdmin** ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `database.sql`

```sql
-- Database: `api_db`
CREATE DATABASE IF NOT EXISTS `api_db` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
USE `api_db`;

-- Table structure for `users`
CREATE TABLE `users` ( `id` int(11) NOT NULL AUTO_INCREMENT, `username` varchar(50) NOT NULL, `email` varchar(255) NOT NULL, `password` varchar(255) NOT NULL, `first_name` varchar(100) DEFAULT NULL, `last_name` varchar(100) DEFAULT NULL, `role` enum('customer','employee','manager','director','admin') DEFAULT 'customer', `created_at` timestamp NOT NULL DEFAULT current_timestamp(), `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(), PRIMARY KEY (`id`), UNIQUE KEY `username` (`username`), UNIQUE KEY `email` (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
INSERT INTO `users` (`id`, `username`, `email`, `password`, `first_name`, `last_name`, `role`) VALUES (1, 'user1', 'user1@example.com', '$2y$10$G3CEGrkTdKVpu6Q8ZAh6keXOjVvWDzpBwbpUZE0oiX28Q5V0EzoCq', 'John', 'Doe', 'customer'), (2, 'admin1', 'admin@example.com', '$2y$10$G3CEGrkTdKVpu6Q8ZAh6keXOjVvWDzpBwbpUZE0oiX28Q5V0EzoCq', 'Admin', 'User', 'admin');

-- Table structure for `categories`
CREATE TABLE `categories` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `description` text DEFAULT NULL, `created_at` timestamp NOT NULL DEFAULT current_timestamp(), PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
INSERT INTO `categories` (`id`, `name`, `description`) VALUES (1, 'Electronics', 'Devices and gadgets'), (2, 'Clothing', 'Apparel and accessories');

-- Table structure for `products`
CREATE TABLE `products` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `price` decimal(10,2) NOT NULL, `description` text DEFAULT NULL, `category_id` int(11) DEFAULT NULL, `stock` int(11) NOT NULL DEFAULT 0, `created_at` timestamp NOT NULL DEFAULT current_timestamp(), `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(), PRIMARY KEY (`id`), KEY `category_id` (`category_id`), CONSTRAINT `products_ibfk_1` FOREIGN KEY (`category_id`) REFERENCES `categories` (`id`) ON DELETE SET NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
INSERT INTO `products` (`id`, `name`, `price`, `description`, `category_id`, `stock`) VALUES (1, 'Laptop', 25000.00, 'High-performance laptop', 1, 50), (2, 'Smartphone', 15000.00, 'Latest model', 1, 100);

-- Table structure for `orders`
CREATE TABLE `orders` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `total_amount` decimal(10,2) NOT NULL, `status` enum('pending','completed','cancelled') DEFAULT 'pending', `created_at` timestamp NOT NULL DEFAULT current_timestamp(), `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(), PRIMARY KEY (`id`), KEY `user_id` (`user_id`), CONSTRAINT `orders_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Table structure for `order_items`
CREATE TABLE `order_items` ( `id` int(11) NOT NULL AUTO_INCREMENT, `order_id` int(11) NOT NULL, `product_id` int(11) DEFAULT NULL, `quantity` int(11) NOT NULL, `unit_price` decimal(10,2) NOT NULL, `created_at` timestamp NOT NULL DEFAULT current_timestamp(), PRIMARY KEY (`id`), KEY `order_id` (`order_id`), KEY `product_id` (`product_id`), CONSTRAINT `order_items_ibfk_1` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`) ON DELETE CASCADE, CONSTRAINT `order_items_ibfk_2` FOREIGN KEY (`product_id`) REFERENCES `products` (`id`) ON DELETE SET NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Table structure for `addresses`
CREATE TABLE `addresses` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) DEFAULT NULL, `address_line` varchar(255) NOT NULL, `city` varchar(100) NOT NULL, `postal_code` varchar(20) NOT NULL, `country` varchar(100) NOT NULL, `created_at` timestamp NOT NULL DEFAULT current_timestamp(), PRIMARY KEY (`id`), KEY `user_id` (`user_id`), CONSTRAINT `addresses_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE SET NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Table structure for `payments`
CREATE TABLE `payments` ( `id` int(11) NOT NULL AUTO_INCREMENT, `order_id` int(11) NOT NULL, `amount` decimal(10,2) NOT NULL, `method` enum('credit_card','bank_transfer','cash') NOT NULL, `status` enum('pending','completed','failed') DEFAULT 'pending', `created_at` timestamp NOT NULL DEFAULT current_timestamp(), PRIMARY KEY (`id`), KEY `order_id` (`order_id`), CONSTRAINT `payments_ibfk_1` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`) ON DELETE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Table structure for `reviews`
CREATE TABLE `reviews` ( `id` int(11) NOT NULL AUTO_INCREMENT, `product_id` int(11) DEFAULT NULL, `user_id` int(11) DEFAULT NULL, `rating` int(11) NOT NULL CHECK (`rating` >= 1 AND `rating` <= 5), `comment` text DEFAULT NULL, `created_at` timestamp NOT NULL DEFAULT current_timestamp(), PRIMARY KEY (`id`), KEY `product_id` (`product_id`), KEY `user_id` (`user_id`), CONSTRAINT `reviews_ibfk_1` FOREIGN KEY (`product_id`) REFERENCES `products` (`id`) ON DELETE SET NULL, CONSTRAINT `reviews_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE SET NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Table structure for `rate_limits`
CREATE TABLE `rate_limits` ( `id` INT AUTO_INCREMENT PRIMARY KEY, `user_id` INT NULL, `ip_address` VARCHAR(45) NOT NULL, `endpoint` VARCHAR(255) NOT NULL, `request_count` INT DEFAULT 0, `window_start` DATETIME NOT NULL, `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE SET NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

**‡πÄ‡∏Å‡∏£‡πá‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ**: ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ `ON DELETE CASCADE` ‡πÅ‡∏•‡∏∞ `ON DELETE SET NULL` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

* `CASCADE`: ‡∏ñ‡πâ‡∏≤‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å (‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏ö Order) ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà (‡πÄ‡∏ä‡πà‡∏ô Order Items) ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏ï‡∏≤‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢

* `SET NULL`: ‡∏ñ‡πâ‡∏≤‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å (‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏ö User) ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏ú‡∏π‡∏Å‡∏≠‡∏¢‡∏π‡πà (‡πÄ‡∏ä‡πà‡∏ô Review) ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤ Foreign Key ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô `NULL` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÑ‡∏ß‡πâ

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies ‡∏î‡πâ‡∏ß‡∏¢ Composer

**Composer** ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ "‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°" ‡∏´‡∏£‡∏∑‡∏≠ Library ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå PHP ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏°‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á `php-jwt` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Token

### 4.1 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `composer.json`

* ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `C:\xampp\htdocs\v.3_api1\composer.json` ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ:

  ```json
  {
      "require": {
          "firebase/php-jwt": "^6.10"
      },
      "autoload": {
          "psr-4": {
              "App\\": "src/"
          }
      }
  }
  ```

* `autoload` ‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å ‡∏°‡∏±‡∏ô‡∏ö‡∏≠‡∏Å Composer ‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏Ñ‡∏•‡∏≤‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `src` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏•‡∏≤‡∏™‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏î‡πâ‡∏ß‡∏¢ `use App\Controllers\UserController;` ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô

### 4.2 ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies

* ‡πÄ‡∏õ‡∏¥‡∏î Command Prompt ‡∏ó‡∏µ‡πà‡∏û‡∏≤‡∏ò‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå (`C:\xampp\htdocs\v.3_api1`)

* ‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á:

  ```bash
  composer install
  ```

* ‡∏£‡∏≠‡∏à‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `vendor` ‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏•‡∏á‡∏°‡∏∑‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î (The Magic Happens Here)

‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏ô‡∏∏‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö! ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏≤‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á MVC ‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ

### 5.1 ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÑ‡∏´‡∏•‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Big Picture & Data Flow)

‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡∏î‡∏π‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πå ‡πÄ‡∏£‡∏≤‡∏°‡∏≤‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à "‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á" ‡∏Ç‡∏≠‡∏á Request ‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÜ ‡∏Å‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏¥‡∏á API ‡∏à‡∏≤‡∏Å Postman ‡∏°‡∏≤‡∏ó‡∏µ‡πà `GET http://one.com/api/users/1` ‡∏°‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏á?

1. **Request ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà `.htaccess`**: ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏£‡∏±‡∏ö Request ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤

2. **‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏´‡∏•‡∏±‡∏Å `public/index.php`**: ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á `Router` ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤

3. **‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà `src/routes.php`**: `Router` ‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏ß‡πà‡∏≤ URL `/users/1` ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏ô

4. **‡∏î‡πà‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à `src/Middlewares`**: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á `Router` ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `Middleware` ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ (‡πÄ‡∏ä‡πà‡∏ô `AuthMiddleware@isSelfOrManager`) ‡∏°‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô `Middleware` ‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à Token ‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡πá‡∏à‡∏∞‡∏™‡πà‡∏á Error ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

5. **‡∏ú‡∏π‡πâ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° `src/Controllers/UserController.php`**: ‡∏ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏°‡∏≤‡πÑ‡∏î‡πâ `Router` ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏°‡∏ò‡∏≠‡∏î `show()` ‡πÉ‡∏ô `UserController` ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤ `id=1` ‡πÑ‡∏õ‡πÉ‡∏´‡πâ

6. **‡∏Ñ‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô `src/Models/User.php`**: `UserController` ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ `User` Model ‡πÑ‡∏õ‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏°‡∏µ `id=1`

7. **‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Database)**: `User` Model ‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á SQL ‡πÑ‡∏õ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á `users`

8. **‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏±‡∏ö**: `Model` ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏´‡πâ `Controller`

9. **‡∏™‡πà‡∏á Response**: `Controller` ‡∏ô‡∏≥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô JSON ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ (MVC) ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö ‡πÅ‡∏•‡∏∞‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏Ñ‡∏£‡∏±‡∏ö

### 5.2 ‡πÑ‡∏ü‡∏•‡πå‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πå Core System

#### `public/.htaccess`

```bash
RewriteEngine On

# ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πá‡∏ö‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ API ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ (CORS)
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type, Authorization"

# ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö OPTIONS request ‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏™‡πà‡∏á‡∏°‡∏≤‡∏ñ‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L]

# ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤ Authorization header ‡πÑ‡∏õ‡πÉ‡∏´‡πâ PHP
RewriteCond %{HTTP:Authorization} .
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

# ‡∏™‡πà‡∏á‡∏ó‡∏∏‡∏Å request ‡∏ó‡∏µ‡πà‡∏´‡∏≤‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠‡πÑ‡∏õ‡∏ó‡∏µ‡πà index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [QSA,L]
```

#### `public/index.php`

```php
<?php
ini_set('display_errors', 1);
error_reporting(E_ALL);

require_once __DIR__ . '/../vendor/autoload.php';
require_once __DIR__ . '/../config/config.php';
require_once __DIR__ . '/../src/Core/Database.php';
require_once __DIR__ . '/../src/Core/Router.php';

$router = new App\Core\Router();
require_once __DIR__ . '/../src/routes.php';

date_default_timezone_set('Asia/Bangkok');
header("Content-Type: application/json; charset=UTF-8");

if ($_SERVER['REQUEST_METHOD'] === 'OPTIONS') {
    http_response_code(200);
    exit();
}

$router->dispatch();
?>
```

#### `config/config.php`

```php
<?php
define('DB_HOST', '127.0.0.1');
define('DB_USER', 'root');
define('DB_PASS', '');
define('DB_NAME', 'api_db');

define('JWT_SECRET', 'YOUR_SUPER_SECRET_KEY_CHANGE_ME_NOW_!@#$%^');
define('JWT_ISSUER', 'one.com');
define('JWT_AUDIENCE', 'one.com');
?>
```

#### `src/Core/Database.php`

```php
<?php
namespace App\Core;
use PDO;
use PDOException;

class Database {
    private $conn;
    public function __construct() {
        $this->conn = null;
        try {
            $this->conn = new PDO("mysql:host=" . DB_HOST . ";dbname=" . DB_NAME . ";charset=utf8mb4", DB_USER, DB_PASS);
            $this->conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch (PDOException $e) {
            http_response_code(500);
            echo json_encode(['message' => 'Database Connection Error: ' . $e->getMessage()]);
            exit();
        }
    }
    public function getConnection() {
        return $this->conn;
    }
}
?>
```

#### `src/Core/Router.php` (‡∏â‡∏ö‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå)

```php
<?php
namespace App\Core;

class Router {
    protected $routes = [];

    private function addRoute($method, $uri, $action, $middlewares = []) {
        $uri = preg_replace('/\{([a-z_]+)\}/', '(?P<$1>[^/]+)', $uri);
        $uri = '#^/api' . $uri . '$#';
        $this->routes[] = [
            'method' => $method, 'uri' => $uri, 'action' => $action,
            'middleware' => is_array($middlewares) ? $middlewares : ($middlewares ? explode(',', $middlewares) : [])
        ];
    }

    public function get($uri, $action, $middleware = []) { $this->addRoute('GET', $uri, $action, $middleware); }
    public function post($uri, $action, $middleware = []) { $this->addRoute('POST', $uri, $action, $middleware); }
    public function put($uri, $action, $middleware = []) { $this->addRoute('PUT', $uri, $action, $middleware); }
    public function delete($uri, $action, $middleware = []) { $this->addRoute('DELETE', $uri, $action, $middleware); }

    public function dispatch() {
        $requestUri = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
        $requestMethod = $_SERVER['REQUEST_METHOD'];

        foreach ($this->routes as $route) {
            if ($route['method'] !== $requestMethod) continue;
            if (preg_match($route['uri'], $requestUri, $matches)) {
                $params = array_filter($matches, 'is_string', ARRAY_FILTER_USE_KEY);
                foreach ($route['middleware'] as $mw) {
                    $middlewareResult = $this->executeMiddleware($mw, $params);
                    if ($middlewareResult !== true) {
                        http_response_code($middlewareResult['status']);
                        echo json_encode(['message' => $middlewareResult['message']]);
                        return;
                    }
                }
                list($controller, $method) = explode('@', $route['action']);
                $controllerInstance = new ("App\\Controllers\\" . $controller)();
                $controllerInstance->$method($params);
                return;
            }
        }
        http_response_code(404);
        echo json_encode(['message' => 'Endpoint not found.']);
    }

    private function executeMiddleware($middlewareClass, $urlParams) {
        $method = 'handle';
        if (strpos($middlewareClass, '@') !== false) {
            list($middlewareClass, $method) = explode('@', $middlewareClass);
        }
        $instance = new $middlewareClass();
        $reflectionMethod = new \ReflectionMethod($instance, $method);
        $requiredParams = $reflectionMethod->getParameters();
        $args = [];
        foreach ($requiredParams as $param) {
            if (isset($urlParams[$param->getName()])) {
                $args[] = $urlParams[$param->getName()];
            }
        }
        return $instance->{$method}(...$args);
    }
}
?>
```

### 5.3 Middlewares (‡∏î‡πà‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à)

#### `src/Middlewares/AuthMiddleware.php`

```php
<?php
namespace App\Middlewares;
use Firebase\JWT\JWT;
use Firebase\JWT\Key;
use App\Core\Database;
use PDO;

class AuthMiddleware {
    private $db;
    private $decodedToken = null;

    public function __construct() { $this->db = (new Database())->getConnection(); }

    private function authenticate() {
        if ($this->decodedToken !== null) return true;
        $headers = getallheaders();
        $authHeader = $headers['Authorization'] ?? '';
        if (!$authHeader || !preg_match('/Bearer\s(\S+)/', $authHeader, $matches)) {
            return ['status' => 401, 'message' => 'Authorization token not found.'];
        }
        try {
            $this->decodedToken = JWT::decode($matches[1], new Key(JWT_SECRET, 'HS256'));
            $stmt = $this->db->prepare("SELECT id FROM users WHERE id = :id");
            $stmt->execute([':id' => $this->decodedToken->sub]);
            if (!$stmt->fetch()) return ['status' => 401, 'message' => 'User associated with this token no longer exists.'];
            return true;
        } catch (\Exception $e) {
            return ['status' => 401, 'message' => 'Invalid or expired token.'];
        }
    }

    public function isAuthenticated() { return $this->authenticate(); }

    public function hasRole($requiredRole) {
        $authResult = $this->authenticate();
        if ($authResult !== true) return $authResult;
        $rolesHierarchy = ['customer' => 1, 'employee' => 2, 'manager' => 3, 'director' => 4, 'admin' => 5];
        $userRole = $this->decodedToken->role;
        if (!isset($rolesHierarchy[$userRole]) || $rolesHierarchy[$userRole] < $rolesHierarchy[$requiredRole]) {
            return ['status' => 403, 'message' => 'Forbidden. Insufficient permissions.'];
        }
        return true;
    }

    public function isAdmin() { return $this->hasRole('admin'); }
    public function isManager() { return $this->hasRole('manager'); }
    public function isEmployee() { return $this->hasRole('employee'); }

    public function isSelfOrManager($id) {
        $authResult = $this->authenticate();
        if ($authResult !== true) return $authResult;
        if ($this->decodedToken->sub == $id) return true;
        return $this->isManager();
    }

    public function isOrderOwnerOrManager($id) {
        $authResult = $this->authenticate();
        if ($authResult !== true) return $authResult;
        $stmt = $this->db->prepare("SELECT user_id FROM orders WHERE id = :id");
        $stmt->execute([':id' => $id]);
        $order = $stmt->fetch(PDO::FETCH_ASSOC);
        if (!$order) return ['status' => 404, 'message' => 'Resource not found.'];
        if ($order['user_id'] == $this->decodedToken->sub) return true;
        return $this->isManager();
    }
}
?>
```

#### `src/Middlewares/RateLimiter.php`

```php
<?php
namespace App\Middlewares;
use App\Core\Database;
use Firebase\JWT\JWT;
use Firebase\JWT\Key;
use DateTime;
use PDO;

class RateLimiter {
    private $db;
    private $limit = 100;
    private $window = 3600;

    public function __construct() { $this->db = (new Database())->getConnection(); }

    public function handle() {
        $ip = $_SERVER['REMOTE_ADDR'];
        $endpoint = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
        $userId = $this->getUserIdFromToken();
        $query = "SELECT id, request_count, window_start FROM rate_limits WHERE ip_address = :ip AND endpoint = :endpoint AND (user_id = :user_id OR (:user_id IS NULL AND user_id IS NULL))";
        $stmt = $this->db->prepare($query);
        $stmt->bindValue(':ip', $ip);
        $stmt->bindValue(':endpoint', $endpoint);
        $stmt->bindValue(':user_id', $userId, $userId ? PDO::PARAM_INT : PDO::PARAM_NULL);
        $stmt->execute();
        $rateLimit = $stmt->fetch(PDO::FETCH_ASSOC);
        $currentTime = new DateTime();

        if ($rateLimit) {
            $windowStart = new DateTime($rateLimit['window_start']);
            if ($currentTime->getTimestamp() - $windowStart->getTimestamp() > $this->window) {
                $stmt = $this->db->prepare("UPDATE rate_limits SET request_count = 1, window_start = :now WHERE id = :id");
                $stmt->execute([':now' => $currentTime->format('Y-m-d H:i:s'), ':id' => $rateLimit['id']]);
            } else {
                if ($rateLimit['request_count'] >= $this->limit) {
                    return ['status' => 429, 'message' => 'Too many requests. Please try again later.'];
                }
                $stmt = $this->db->prepare("UPDATE rate_limits SET request_count = request_count + 1 WHERE id = :id");
                $stmt->execute([':id' => $rateLimit['id']]);
            }
        } else {
            $stmt = $this->db->prepare("INSERT INTO rate_limits (user_id, ip_address, endpoint, request_count, window_start) VALUES (:user_id, :ip, :endpoint, 1, :now)");
            $stmt->bindValue(':user_id', $userId, $userId ? PDO::PARAM_INT : PDO::PARAM_NULL);
            $stmt->bindValue(':ip', $ip);
            $stmt->bindValue(':endpoint', $endpoint);
            $stmt->bindValue(':now', $currentTime->format('Y-m-d H:i:s'));
            $stmt->execute();
        }
        return true;
    }

    private function getUserIdFromToken() {
        $authHeader = getallheaders()['Authorization'] ?? '';
        if (preg_match('/Bearer\s(\S+)/', $authHeader, $matches)) {
            try { return JWT::decode($matches[1], new Key(JWT_SECRET, 'HS256'))->sub; } catch (\Exception $e) { return null; }
        }
        return null;
    }
}
?>
```

### 5.4 ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Controllers ‡πÅ‡∏•‡∏∞ Models (‡∏â‡∏ö‡∏±‡∏ö‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢)

‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö

#### **Authentication**

##### `src/Controllers/AuthController.php`

```php
<?php
namespace App\Controllers;

use Firebase\JWT\JWT;
use App\Core\Database;
use PDO;

/**
 * AuthController
 * ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
 */
class AuthController {
    private $db;

    public function __construct() {
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏≤‡∏™‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô
        $this->db = (new Database())->getConnection();
    }

    /**
     * ‡πÄ‡∏°‡∏ò‡∏≠‡∏î login
     * ‡∏£‡∏±‡∏ö email ‡πÅ‡∏•‡∏∞ password, ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á JWT token ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
     */
    public function login() {
        // ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        $data = json_decode(file_get_contents("php://input"));

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        if (empty($data->email) || empty($data->password)) {
            http_response_code(400); // Bad Request
            echo json_encode(['message' => 'Email and password are required.']);
            return;
        }

        // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏î‡πâ‡∏ß‡∏¢ email
        $stmt = $this->db->prepare("SELECT id, password, role FROM users WHERE email = :email");
        $stmt->execute([':email' => $data->email]);
        $user = $stmt->fetch(PDO::FETCH_ASSOC);

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏à‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        if ($user && password_verify($data->password, $user['password'])) {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏™‡πà‡πÉ‡∏ô Token (Payload)
            $payload = [
                'iss' => JWT_ISSUER, // ‡∏ú‡∏π‡πâ‡∏≠‡∏≠‡∏Å token
                'aud' => JWT_AUDIENCE, // ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö token
                'iat' => time(), // ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á token
                'exp' => time() + (60*60*24), // Token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÉ‡∏ô 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
                'sub' => $user['id'], // Subject (ID ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ)
                'role' => $user['role'] // Role ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
            ];

            // ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™ payload ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô JWT token
            $jwt = JWT::encode($payload, JWT_SECRET, 'HS256');
            http_response_code(200); // OK
            echo json_encode(['token' => $jwt, 'message' => 'Login successful.']);
        } else {
            // ‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
            http_response_code(401); // Unauthorized
            echo json_encode(['message' => 'Invalid credentials.']);
        }
    }
}
?>
```

#### **Users**

##### `src/Models/User.php`

```php
<?php
namespace App\Models;
use App\Core\Database;
use PDO;

/**
 * User Model
 * ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á 'users' ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
 */
class User {
    private $db;
    public function __construct() { $this->db = (new Database())->getConnection(); }

    // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    public function getAll() {
        return $this->db->query("SELECT id, username, email, first_name, last_name, role, created_at FROM users")->fetchAll(PDO::FETCH_ASSOC);
    }
    // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏î‡πâ‡∏ß‡∏¢ ID
    public function getById($id) {
        $stmt = $this->db->prepare("SELECT id, username, email, first_name, last_name, role, created_at FROM users WHERE id = :id");
        $stmt->execute([':id' => $id]);
        return $stmt->fetch(PDO::FETCH_ASSOC);
    }
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà
    public function create($data) {
        if (empty($data->username) || empty($data->email) || empty($data->password)) {
            return ['status' => 400, 'message' => 'Username, email, and password are required.'];
        }
        $sql = "INSERT INTO users (username, email, password, first_name, last_name, role) VALUES (:username, :email, :password, :first_name, :last_name, :role)";
        $stmt = $this->db->prepare($sql);
        try {
            $stmt->execute([
                ':username' => htmlspecialchars(strip_tags($data->username)),
                ':email' => htmlspecialchars(strip_tags($data->email)),
                ':password' => password_hash($data->password, PASSWORD_BCRYPT), // ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Å‡πá‡∏ö
                ':first_name' => $data->first_name ?? null,
                ':last_name' => $data->last_name ?? null,
                ':role' => $data->role ?? 'customer'
            ]);
            return ['status' => 201, 'message' => 'User created successfully.'];
        } catch (\PDOException $e) {
            // ‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö error ‡∏Å‡∏£‡∏ì‡∏µ username ‡∏´‡∏£‡∏∑‡∏≠ email ‡∏ã‡πâ‡∏≥
            return ['status' => 409, 'message' => 'Username or email already exists.'];
        }
    }
    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
    public function update($id, $data) {
        $sql = "UPDATE users SET first_name = :first_name, last_name = :last_name, role = :role WHERE id = :id";
        $stmt = $this->db->prepare($sql);
        $stmt->execute([':id' => $id, ':first_name' => $data->first_name, ':last_name' => $data->last_name, ':role' => $data->role]);
        return ['status' => 200, 'message' => 'User updated successfully.'];
    }
    // ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
    public function delete($id) {
        $stmt = $this->db->prepare("DELETE FROM users WHERE id = :id");
        $stmt->execute([':id' => $id]);
        return $stmt->rowCount() > 0 ? ['status' => 200, 'message' => 'User deleted successfully.'] : ['status' => 404, 'message' => 'User not found.'];
    }
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ username/email ‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
    public function checkExistence($data) {
        $field = isset($data->username) ? 'username' : 'email';
        $value = $data->username ?? $data->email;
        if (empty($value)) return ['status' => 400, 'message' => 'Username or email is required.'];

        $stmt = $this->db->prepare("SELECT id FROM users WHERE $field = :value");
        $stmt->execute([':value' => $value]);
        return $stmt->fetch() ? ['status' => 409, 'message' => ucfirst($field) . ' already exists.'] : ['status' => 200, 'message' => ucfirst($field) . ' is available.'];
    }
    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
    public function changePassword($id, $data) {
        if (empty($data->old_password) || empty($data->new_password)) {
            return ['status' => 400, 'message' => 'Old and new passwords are required.'];
        }
        $stmt = $this->db->prepare("SELECT password FROM users WHERE id = :id");
        $stmt->execute([':id' => $id]);
        $user = $stmt->fetch(PDO::FETCH_ASSOC);
        if (!$user || !password_verify($data->old_password, $user['password'])) {
            return ['status' => 401, 'message' => 'Invalid old password.'];
        }
        $stmt = $this->db->prepare("UPDATE users SET password = :password WHERE id = :id");
        $stmt->execute([':password' => password_hash($data->new_password, PASSWORD_BCRYPT), ':id' => $id]);
        return ['status' => 200, 'message' => 'Password changed successfully.'];
    }
}
?>
```

##### `src/Controllers/UserController.php`

```php
<?php
namespace App\Controllers;
use App\Models\User;

/**
 * UserController
 * ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á‡∏£‡∏±‡∏ö Request ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö User ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÉ‡∏´‡πâ Model
 */
class UserController {
    private $model;
    public function __construct() { $this->model = new User(); }

    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Model ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    public function index() { echo json_encode($this->model->getAll()); }

    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Model ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
    public function show($params) {
        $item = $this->model->getById($params['id']);
        if ($item) echo json_encode($item); else { http_response_code(404); echo json_encode(['message' => 'User not found.']); }
    }

    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Model ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
    public function create() {
        $data = json_decode(file_get_contents("php://input"));
        $result = $this->model->create($data);
        http_response_code($result['status']); echo json_encode(['message' => $result['message']]);
    }
    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Model ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
    public function update($params) {
        $data = json_decode(file_get_contents("php://input"));
        $result = $this->model->update($params['id'], $data);
        http_response_code($result['status']); echo json_encode(['message' => $result['message']]);
    }
    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Model ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
    public function delete($params) {
        $result = $this->model->delete($params['id']);
        http_response_code($result['status']); echo json_encode(['message' => $result['message']]);
    }
    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Model ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥
    public function checkExistence() {
        $data = json_decode(file_get_contents("php://input"));
        $result = $this->model->checkExistence($data);
        http_response_code($result['status']); echo json_encode(['message' => $result['message']]);
    }
    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Model ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
    public function changePassword($params) {
        $data = json_decode(file_get_contents("php://input"));
        $result = $this->model->changePassword($params['id'], $data);
        http_response_code($result['status']); echo json_encode(['message' => $result['message']]);
    }
}
?>
```

#### **Categories, Products, Orders, etc.**

_(‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÅ‡∏û‡∏ó‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö Users ‡∏Ñ‡∏∑‡∏≠ Controller ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á ‡πÅ‡∏•‡∏∞ Model ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á)_

(‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ï‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏≠‡∏á Model ‡πÅ‡∏•‡∏∞ Controller ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß)

### 5.5 ‡πÑ‡∏ü‡∏•‡πå‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Routes) ‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

#### `src/routes.php`

‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏ó‡∏∏‡∏Å Endpoint ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö Controller ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

```php
<?php
// PUBLIC ROUTES
$router->post('/auth/login', 'AuthController@login', ['App\Middlewares\RateLimiter']);
$router->post('/users', 'UserController@create', ['App\Middlewares\RateLimiter']);
$router->post('/users/check-existence', 'UserController@checkExistence', ['App\Middlewares\RateLimiter']);
$router->get('/categories', 'CategoryController@index', ['App\Middlewares\RateLimiter']);
$router->get('/categories/{id}', 'CategoryController@show', ['App\Middlewares\RateLimiter']);
$router->get('/products', 'ProductController@index', ['App\Middlewares\RateLimiter']);
$router->get('/products/{id}', 'ProductController@show', ['App\Middlewares\RateLimiter']);
$router->get('/reviews', 'ReviewController@index', ['App\Middlewares\RateLimiter']);
$router->get('/reviews/{id}', 'ReviewController@show', ['App\Middlewares\RateLimiter']);

// AUTHENTICATED ROUTES
$router->post('/orders', 'OrderController@create', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isAuthenticated']);
$router->post('/order-items', 'OrderItemController@create', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isAuthenticated']);
$router->post('/addresses', 'AddressController@create', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isAuthenticated']);
$router->post('/payments', 'PaymentController@create', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isAuthenticated']);
$router->post('/reviews', 'ReviewController@create', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isAuthenticated']);

// PERMISSION-BASED ROUTES
$router->get('/users', 'UserController@index', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isEmployee']);
$router->get('/users/{id}', 'UserController@show', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isSelfOrManager']);
$router->put('/users/{id}', 'UserController@update', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isSelfOrManager']);
$router->post('/users/{id}/change-password', 'UserController@changePassword', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isSelfOrManager']);
$router->delete('/users/{id}', 'UserController@delete', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isAdmin']);
$router->post('/categories', 'CategoryController@create', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isManager']);
$router->put('/categories/{id}', 'CategoryController@update', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isManager']);
$router->delete('/categories/{id}', 'CategoryController@delete', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isManager']);
$router->post('/products', 'ProductController@create', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isManager']);
$router->put('/products/{id}', 'ProductController@update', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isManager']);
$router->delete('/products/{id}', 'ProductController@delete', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isManager']);
$router->get('/orders', 'OrderController@index', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isEmployee']);
$router->get('/orders/{id}', 'OrderController@show', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isOrderOwnerOrManager']);
$router->put('/orders/{id}', 'OrderController@update', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isOrderOwnerOrManager']);
$router->delete('/orders/{id}', 'OrderController@delete', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isAdmin']);
$router->get('/order-items', 'OrderItemController@index', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isEmployee']);
$router->get('/order-items/{id}', 'OrderItemController@show', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isOrderOwnerOrManager']);
$router->put('/order-items/{id}', 'OrderItemController@update', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isManager']);
$router->delete('/order-items/{id}', 'OrderItemController@delete', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isManager']);
$router->get('/addresses', 'AddressController@index', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isEmployee']);
$router->get('/addresses/{id}', 'AddressController@show', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isSelfOrManager']);
$router->put('/addresses/{id}', 'AddressController@update', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isSelfOrManager']);
$router->delete('/addresses/{id}', 'AddressController@delete', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isSelfOrManager']);
$router->get('/payments', 'PaymentController@index', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isEmployee']);
$router->get('/payments/{id}', 'PaymentController@show', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isOrderOwnerOrManager']);
$router->put('/payments/{id}', 'PaymentController@update', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isManager']);
$router->delete('/payments/{id}', 'PaymentController@delete', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isAdmin']);
$router->put('/reviews/{id}', 'ReviewController@update', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isSelfOrManager']);
$router->delete('/reviews/{id}', 'ReviewController@delete', ['App\Middlewares\RateLimiter', 'App\Middlewares\AuthMiddleware@isSelfOrManager']);
?>
```

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 6: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Postman (The Final Check)

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ API ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏ï‡πá‡∏° 100% ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ **Postman Collection** ‡∏ó‡∏µ‡πà‡∏ú‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å Endpoint ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢

* **‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°**: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏ô Request Body ‡∏Ç‡∏≠‡∏á `Login` ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

* **‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö**: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£ Login ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö Token ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏ô‡∏≥ Token ‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô Header ‡∏Ç‡∏≠‡∏á Request ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 7: ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡πâ‡∏≤‡∏ß‡∏ï‡πà‡∏≠‡πÑ‡∏õ (Troubleshooting & Next Steps)

* **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢**: `404 Not Found` (‡πÄ‡∏ä‡πá‡∏Ñ URL), `500 Internal Server Error` (‡πÄ‡∏ä‡πá‡∏Ñ log), `401/403 Unauthorized/Forbidden` (‡πÄ‡∏ä‡πá‡∏Ñ Token ‡πÅ‡∏•‡∏∞ Role)

* **‡∏Å‡πâ‡∏≤‡∏ß‡∏ï‡πà‡∏≠‡πÑ‡∏õ**: ‡∏•‡∏≠‡∏á‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á **Validation** (‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•), **Pagination** (‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤), ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ **API Documentation** ‡∏î‡πâ‡∏ß‡∏¢ Swagger, ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô **Unit Test** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ API ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô

‡∏ú‡∏°‡∏´‡∏ß‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏ô‡∏∏‡∏Å‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ñ‡∏£‡∏±‡∏ö!
